var TagSelector=function(){"use strict";function e(e,i){for(var s=0;s<i.length;s++){var n=i[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}
/*!
   * TagSelector
   */var i={max:!1,onInit:!1,onDestroy:!1,onSelect:!1,onDeselect:!1},s=function(){return t=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ele=t,this.userSettings=i||{},this.isMultiple=this.ele.multiple,this.selected=[],this.options={},this.settings={},this.wrapper=null,this.ele&&null!==this.ele&&"SELECT"===this.ele.tagName?this.init():console.error("Error: Must provide a valid ID for select field")},(s=[{key:"init",value:function(){var e,t,s,n,o=this;this.options=function(e){for(var t=e.options,i={},s=0;s<t.length;s++)i[t[s].value]={text:t[s].text,index:s,selected:t[s].selected};return i}(this.ele),this.settings=(e=this.userSettings,t={},Object.keys(i).forEach((function(s){e[s]?t[s]=e[s]:t[s]=i[s]})),t),this.ele.style.display="none",this.wrapper=document.createElement("div"),this.wrapper.className="tagselector-wrapper",s=this.wrapper,(n=this.ele).parentNode.insertBefore(s,n.nextSibling),Object.keys(this.options).forEach((function(e,t){var i=document.createElement("span");i.className="tagselector-tag",i.innerHTML=o.options[e].text,i.dataset.tagvalue=e,i.dataset.tagindex=o.options[e].index,o.options[e].selected&&(i.classList.add("active"),o.selected.push(e)),o.addTagListener(i),o.wrapper.appendChild(i)})),this.settings.onInit&&"function"==typeof this.settings.onInit&&this.settings.onInit()}},{key:"addTagListener",value:function(e){var t=this.selected,i=this.ele,s=this.wrapper,n=this.isMultiple,o=this.settings,r=this.options;e.addEventListener("click",(function(){var e=this.dataset.tagvalue,a=this.dataset.tagindex;if(this.classList.contains("active")){if(!n)return;this.classList.remove("active");var l=t.findIndex((function(t){return t.value===e&&t.index===a}));l>-1&&t.splice(l,1),i.options[a].selected=!1,o.onDeselect&&"function"==typeof o.onDeselect&&o.onDeselect(e,r[e].text)}else{if(n){if(t.push({value:e,index:a}),o.max&&t.length>o.max){var c=t[0].value,p=r[c].index;i.options[p].selected=!1,s.querySelector('.tagselector-tag.active[data-tagvalue="'.concat(c,'"]')).classList.remove("active"),o.onDeselect&&"function"==typeof o.onDeselect&&o.onDeselect(t[0].value,r[t[0].value].text),t.shift()}}else s.querySelector(".tagselector-tag.active").classList.remove("active");i.options[a].selected=!0,o.onSelect&&"function"==typeof o.onSelect&&o.onSelect(e,r[e].text),this.classList.add("active")}}))}},{key:"destroy",value:function(){this.selected=[],this.options={},this.wrapper.parentNode.removeChild(this.wrapper),this.wrapper=null,this.ele.style.display="initial",this.settings.onDestroy&&"function"==typeof this.settings.onDestroy&&this.settings.onDestroy(),this.settings={}}},{key:"reload",value:function(){this.selected=[],this.options={},this.wrapper.parentNode.removeChild(this.wrapper),this.wrapper=null,this.init()}}])&&e(t.prototype,s),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,s,n}();return console.log("TagSelector is ready!"),s}();
//# sourceMappingURL=tagselector.js.map
